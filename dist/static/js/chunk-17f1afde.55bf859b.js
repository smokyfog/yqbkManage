(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17f1afde"],{"03f4":function(e,t,i){"use strict";var n=i("65fd"),a=i.n(n);a.a},"24d7":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"put_article components-container"},[i("div",[i("tinymce",{ref:"tinymce",attrs:{isinit:e.isInit,height:800},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),i("div",{staticClass:"oper_box"},[i("el-button",{attrs:{type:"primary"},on:{click:e.show_release_article}},[e._v("详情")])],1),e._v(" "),i("el-dialog",{attrs:{title:"发布文章",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"文章名称"}},[i("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否禁止显示","label-width":"120px"}},[i("el-select",{model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"选择类型","label-width":"120px"}},[i("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{label:"笔记",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"分享",value:"10"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"banner图","label-width":"120px"}},[i("UploadSingleImg",{attrs:{image_url:e.imageUrl},on:{change_img:e.change_img}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文章描述","label-width":"120px"}},[i("el-input",{attrs:{rows:"5",type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"oper_box"},[i("el-button",{attrs:{type:"primary"},on:{click:e.release_article}},[e._v("确认")]),e._v(" "),i("el-button",{on:{click:e.quit}},[e._v("取消")])],1)],1)],1)],1)},a=[],r=(i("efce"),i("4634"),i("ed8b"),i("97a3")),o=(i("63ff"),i("f8f9")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},l=[],c=(i("8f42"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n    upload\n  ")]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:e.uploadUrl,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n        Click upload\n      ")])],1),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n      Cancel\n    ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      Confirm\n    ")])],1)],1)}),u=[],d={baseUrl:"http://localhost:8001"},f=d,m={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{uploadUrl:f.baseUrl+"/api/admin/article/putImg",dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var i=t.uid,n=Object.keys(this.listObj),a=0,r=n.length;a<r;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url=e.url,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,i=Object.keys(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===t)return void delete this.listObj[i[n]]},beforeUpload:function(e){var t=this,i=window.URL||window.webkitURL,n=e.uid;return this.listObj[n]={},new Promise((function(a,r){var o=new Image;o.src=i.createObjectURL(e),o.onload=function(){t.listObj[n]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},a(!0)}))}}},h=m,p=(i("69ca"),i("6691")),b=Object(p["a"])(h,c,u,!1,null,"8d509482",null),g=b.exports,v=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],y=v,_=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],w=_,O=(i("4b5e"),i("6c28"),[]);function j(){return window.tinymce}var k=function(e,t){var i=document.getElementById(e),n=t||function(){};if(!i){var a=document.createElement("script");a.src=e,a.id=e,document.body.appendChild(a),O.push(n);var r="onload"in a?o:s;r(a)}function o(t){t.onload=function(){this.onerror=this.onload=null;var e=!0,i=!1,n=void 0;try{for(var a,r=O[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;o(null,t)}}catch(s){i=!0,n=s}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}O=null},t.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+e),t)}}function s(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t=!0,i=!1,n=void 0;try{for(var a,r=O[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;o(null,e)}}catch(s){i=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}O=null}}}i&&n&&(j()?n(null,i):O.push(n))},C=k,S="/tinymce/tinymce.min.js",I={name:"Tinymce",components:{editorImage:g},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},isinit:{type:Boolean,required:!1,default:!0}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.isinit&&this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;C(S,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:w,menubar:this.menubar,plugins:y,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},x=I,P=(i("d742"),Object(p["a"])(x,s,l,!1,null,"8852693c",null)),E=P.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload_single_img"},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload}},[e.image_url?i("img",{staticClass:"avatar",attrs:{src:e.image_url}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},U=[],$={props:{image_url:{type:String,default:"",isRequrie:!0}},data:function(){return{uploadUrl:f.baseUrl+"/api/admin/article/putImg"}},methods:{handleAvatarSuccess:function(e,t){if(0===e.code){var i=e.url,n=e.path;this.$emit("change_img",i,n),this.$message({type:"success",message:e.msg})}else this.$message.error(e.msg)},handleAvatarError:function(e,t){this.$message.error("上传失败")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 格式!"),i||this.$message.error("上传图片大小不能超过 2MB!"),t&&i}}},N=$,A=(i("03f4"),Object(p["a"])(N,T,U,!1,null,null,null)),R=A.exports,V=i("def6");function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(i,!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var F={name:"TinymceDemo",components:{Tinymce:E,UploadSingleImg:R},data:function(){return{form:{title:"",desc:"",type:"1",disabled:"0"},dialogTableVisible:!1,imageUrl:"",imagePath:"",content:"",isInit:!this.$route.query.id}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.id,!t){e.next=7;break}return e.next=4,V["a"].get_article_detail({id:t});case 4:i=e.sent,0===i.code&&(n=i.data,this.form={title:n.title,desc:n.info||"",type:n.type,disabled:n.disabled||0},this.imageUrl=n.imageUrl||"",this.imagePath=i.path||"",this.content=n.content||""),this.$refs.tinymce.init();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{show_release_article:function(){this.dialogTableVisible=!0},quit:function(){this.dialogTableVisible=!1,this.form={title:"",desc:"",type:"",disabled:""},this.imageUrl=""},release_article:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,V["a"].release_article(q({content:this.content},this.form,{imageUrl:this.imagePath,_id:t}));case 3:i=e.sent,0===i.code?this.$message({message:i.msg,type:"success"}):this.$message.error(i.msg);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),change_img:function(e,t){console.log(e,t),this.imageUrl=e,this.imagePath=t}}},G=F,M=(i("3f8c"),Object(p["a"])(G,n,a,!1,null,"26b4460e",null));t["default"]=M.exports},"3a06":function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"3f8c":function(e,t,i){"use strict";var n=i("5de1"),a=i.n(n);a.a},"5de1":function(e,t,i){},"5e72":function(e,t,i){},"65fd":function(e,t,i){},"69ca":function(e,t,i){"use strict";var n=i("5e72"),a=i.n(n);a.a},7130:function(e,t,i){var n=i("2498"),a=i("3038"),r=i("0cc1"),o=i("3a06"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,i){var a={},s=r((function(){return!!o[e]()||l[e]()!=l})),c=a[e]=s?t(f):o[e];i&&(a[i]=c),n(n.P+n.F*s,"String",a)},f=d.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},"8f42":function(e,t,i){"use strict";var n=i("3f8b"),a=i("549d"),r=i("6077"),o=i("1e01"),s=i("2ab1"),l=i("0cc1"),c=i("cb2e").f,u=i("e493").f,d=i("d3d8").f,f=i("7130").trim,m="Number",h=n[m],p=h,b=h.prototype,g=r(i("65c3")(b))==m,v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():f(t,3);var i,n,a,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,l=t.slice(2),c=0,u=l.length;c<u;c++)if(o=l.charCodeAt(c),o<48||o>a)return NaN;return parseInt(l,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof h&&(g?l((function(){b.valueOf.call(i)})):r(i)!=m)?o(new p(y(t)),i,h):y(t)};for(var _,w=i("f9a5")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)a(p,_=w[O])&&!a(h,_)&&d(h,_,u(p,_));h.prototype=b,b.constructor=h,i("a6d5")(n,m,h)}},d354:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("f753"),a=i.n(n);function r(e){var t=e.method,i=e.url,n=e.params;return"Get"===t||"get"===t||"GET"===t?o(i,n):"Post"===t||"post"===t||"POST"===t?s(i,n):void 0}function o(e,t){return new Promise((function(i,n){a.a.get(e,{params:t}).then((function(e){i(e.data)})).catch((function(e){n(e)}))}))}function s(e,t){return new Promise((function(i,n){a.a.post(e,JSON.stringify(t)).then((function(e){i(e.data)})).catch((function(e){n(e.data)}))}))}a.a.defaults.baseURL="http://localhost:8001/api",a.a.defaults.timeout=1e4,a.a.defaults.headers.post["Content-Type"]="application/json; charset=utf-8",a.a.interceptors.response.use((function(e){return"209"===e.data.code&&(window.location.href="/auth/login?back_url="+window.location.origin),Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},d742:function(e,t,i){"use strict";var n=i("f5f6"),a=i.n(n);a.a},def6:function(e,t,i){"use strict";var n=i("d354");t["a"]={getTestData:function(e){return Object(n["a"])({method:"Get",url:"/dev-api/table/list",params:e})},getMovieList:function(e){return Object(n["a"])({method:"Get",url:"/admin/movie/list",params:e})},delPlotPics:function(e){return Object(n["a"])({method:"Post",url:"/admin/movie/delPlotPics",params:e})},createMovie:function(e){return Object(n["a"])({method:"Post",url:"/admin/smallvideo/add",params:e})},getOfficialUsers:function(e){return Object(n["a"])({method:"GET",url:"/admin/user/list",params:e})},getArticleList:function(e){return Object(n["a"])({method:"Get",url:"/admin/article/list",params:e})},delete_article:function(e){return Object(n["a"])({method:"Post",url:"/admin/article/delete_article",params:e})},get_article_detail:function(e){return Object(n["a"])({method:"GET",url:"/admin/article/get_detail",params:e})},release_article:function(e){return Object(n["a"])({method:"Post",url:"/admin/article/release_article",params:e})}}},f5f6:function(e,t,i){}}]);